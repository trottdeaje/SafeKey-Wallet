(this.webpackJsonp=this.webpackJsonp||[]).push([[10],{322:function(e,t,a){e.exports=a.p+"static/media/file-text.a031f6ff.png"},336:function(e,t){},354:function(e,t){},355:function(e,t){},356:function(e,t){},357:function(e,t){},358:function(e,t){},438:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),o=a(3),c=a.n(o),i=a(0),s=a.n(i),l=a(2),u=a(52),m=a(84),d=a(39),f=a(318),p=a(70),g=a(22),y=a(435),b=a(159),h=a(37),x=a(41),E=a(313),w=a(348),S=a(361),v=a(85),P=a(146),k=Object(x.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(2)]).then(a.bind(null,317))}));t.default=function(e){var t=e.navigation,n=Object(i.useState)(""),o=r()(n,2),x=o[0],D=o[1],K=Object(b.b)(),C=Object(E.a)([a(322)]),O=r()(C,1)[0];return s.a.createElement(s.a.Fragment,null,O?s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{style:h.a.container},s.a.createElement(u.a,{style:{textAlign:"center",marginBottom:.5,fontSize:16,marginBottom:16,lineHeight:24}},"Add your SafeKey to your wallet by selecting your"," ",s.a.createElement(u.a,{style:{fontWeight:"bold"}},"SafeKey PDF Document "),"or"," ",s.a.createElement(u.a,{style:{fontWeight:"bold"}},"Vaccination Certificate PDF Document")),s.a.createElement(u.a,{style:[h.a.text,{fontWeight:"bold",marginTop:15,marginBottom:15}]},"Select your PDF Document"),s.a.createElement(m.a,{style:[h.a.btn,h.a.shadow,{backgroundColor:"#1971ef"}],onPress:function(){var e,a,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.a.awrap(y.a({type:"application/pdf"}));case 3:"cancel"!==(e=r.sent).type&&(n=function(e){if(0===e.codes.length)return console.error("No QR Found"),void D("SafeKey QR Code not detected. Please try again.");!function(){var a,n,r,o,i,d,y,b,x,E,w,S,v,k,C,O;c.a.async((function(A){for(;;)switch(A.prev=A.next){case 0:if(a=e.codes.toString(),n=[":BM.KEY:"],![":BM.KEY:",":BM.VAX:"].some((function(e){return a.includes(e)}))){A.next=34;break}if(!n.some((function(e){return a.includes(e)}))){A.next=25;break}if(r=a.indexOf(":",130),o=a.indexOf("/"),i=a.substring(r,o),d=i.slice(1),isNaN(d)){A.next=24;break}if(y=parseInt(d.substr(0,4),10),b=parseInt(d.substr(6),10),x=parseInt(d.substr(4,2),10),E=new Date(y,x-1,b),w=new Date,!(E.getTime()<w.getTime())){A.next=18;break}if(!(E.getDate()<w.getDate())){A.next=18;break}return A.abrupt("return",D(s.a.createElement(l.a,{style:[h.a.center,{width:"100%",maxWidth:500,marginTop:20,padding:10,textAlign:"center"}]},s.a.createElement(u.a,{style:[h.a.text,{color:"red",fontFamily:"OpenSans_600SemiBold"}]},"This SafeKey has expired. Click the button below to visit the SafeKey renewal page."," "),s.a.createElement(m.a,{style:[h.a.btn,h.a.shadow,h.a.btnLine,{marginTop:10}],onPress:function(){return f.a.openURL("https://www.gov.bm/safekey")}},s.a.createElement(u.a,{style:[h.a.btnText,{color:"#1971ef"}]},"Renew")))));case 18:return S={weekday:"long",year:"numeric",month:"long",day:"numeric"},v=E.toLocaleString("en-US",S),A.next=22,c.a.awrap(p.a.setItem("passExpiry",v));case 22:A.next=25;break;case 24:console.error("parsed date is not a number");case 25:return k=a.indexOf(":"),k+=1,C=a.indexOf(":",k+1),O=a.substring(k,C),A.next=31,c.a.awrap(p.a.setItem(O,a));case 31:P.a("DocumentAdded",{type:"BM.KEY"===O?"SafeKey":"Vaccination Certificate",purpose:"User has added their SafeKey document"}),t.dispatch(g.CommonActions.reset({index:0,routes:[{name:"QR List"}]})),K.show("BM.KEY"===O?s.a.createElement(l.a,null,s.a.createElement(u.a,{style:[h.a.bold,{color:"#fff"}]},"SafeKey Added")):s.a.createElement(l.a,null,s.a.createElement(u.a,{style:[h.a.bold,{color:"#fff"}]},"Vaccination Certificate Added")),{id:3,type:"success",duration:3500});case 34:case"end":return A.stop()}}),null,null,null,Promise)}()},1,a={scale:{once:!0,value:5,start:.2,step:.2,stop:2},resultOpts:{singleCodeInPage:!0,multiCodesInPage:!1,maxCodesInPage:1},improve:!0,jsQR:{}},D(s.a.createElement(l.a,{style:{marginTop:20}},s.a.createElement(S.ClipLoader,{size:"14px",color:"#1971ef"}))),w.PDF_QR_JS.decodeSinglePage(e.uri,1,a,n)),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0);case 10:case"end":return r.stop()}}),null,null,[[0,7]],Promise)}},s.a.createElement(u.a,{style:[h.a.center,{textAlign:"center",color:"white",fontSize:17}]},s.a.createElement(d.a,{style:{width:20,height:20,marginRight:8},source:a(322)}),"Select")),s.a.createElement(u.a,null,x||"")),s.a.createElement(k,null)):s.a.createElement(v.a,null))}}}]);
//# sourceMappingURL=10.e7d8e93f.chunk.js.map