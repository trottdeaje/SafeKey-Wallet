(this.webpackJsonp=this.webpackJsonp||[]).push([[9],{321:function(e,t,n){e.exports=n.p+"static/media/file-text.a031f6ff.png"},330:function(e,t){},350:function(e,t){},351:function(e,t){},352:function(e,t){},353:function(e,t){},354:function(e,t){},433:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(4),i=n.n(o),c=n(0),s=n.n(c),l=n(2),u=n(52),m=n(83),d=n(44),f=n(319),p=n(70),g=n(22),y=n(430),b=n(157),h=n(37),x=n(39),w=n(312),E=n(344),S=n(357),v=n(84),P=Object(x.a)((function(){return n.e(0).then(n.bind(null,316))}));t.default=function(e){var t=e.navigation,a=Object(c.useState)(""),o=r()(a,2),x=o[0],k=o[1],C=Object(b.b)(),O=Object(w.a)([n(321)]),D=r()(O,1)[0];return s.a.createElement(s.a.Fragment,null,D?s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{style:h.a.container},s.a.createElement(u.a,{style:{textAlign:"center",marginBottom:.5,fontSize:16,marginBottom:16,lineHeight:24}},"Add your SafeKey to your wallet by selecting your"," ",s.a.createElement(u.a,{style:{fontWeight:"bold"}},"SafeKey PDF Document "),"or"," ",s.a.createElement(u.a,{style:{fontWeight:"bold"}},"Vaccination Certificate PDF Document")),s.a.createElement(u.a,{style:[h.a.text,{fontWeight:"bold",marginTop:15,marginBottom:15}]},"Select your PDF Document"),s.a.createElement(m.a,{style:[h.a.btn,h.a.shadow,{backgroundColor:"#1971ef"}],onPress:function(){var e,n,a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.a.awrap(y.a({type:"application/pdf"}));case 3:"cancel"!==(e=r.sent).type&&(a=function(e){if(0===e.codes.length)return console.log("No QR Found"),void k("SafeKey QR Code not detected. Please try again.");!function(){var n,a,r,o,c,d,y,b,x,w,E,S,v,P,O,D;i.a.async((function(K){for(;;)switch(K.prev=K.next){case 0:if(n=e.codes.toString(),a=[":BM.KEY:"],![":BM.KEY:",":BM.VAX:"].some((function(e){return n.includes(e)}))){K.next=32;break}if(!a.some((function(e){return n.includes(e)}))){K.next=24;break}if(r=n.indexOf(":",130),o=n.indexOf("/"),c=n.substring(r,o),d=c.slice(1),isNaN(d)){K.next=23;break}if(y=parseInt(d.substr(0,4),10),b=parseInt(d.substr(6),10),x=parseInt(d.substr(4,2),10),w=new Date(y,x-1,b),E=new Date,!(w.getTime()<E.getTime())){K.next=17;break}return K.abrupt("return",k(s.a.createElement(l.a,{style:[h.a.center,{width:"100%",maxWidth:500,marginTop:20,padding:10,textAlign:"center"}]},s.a.createElement(u.a,{style:[h.a.text,{color:"red",fontFamily:"OpenSans_600SemiBold"}]},"This SafeKey has expired. Click the button below to visit the SafeKey renewal page."," "),s.a.createElement(m.a,{style:[h.a.btn,h.a.shadow,h.a.btnLine,{marginTop:10}],onPress:function(){return f.a.openURL("https://www.gov.bm/safekey")}},s.a.createElement(u.a,{style:[h.a.btnText,{color:"#1971ef"}]},"Renew")))));case 17:return S={weekday:"long",year:"numeric",month:"long",day:"numeric"},v=w.toLocaleString("en-US",S),K.next=21,i.a.awrap(p.a.setItem("passExpiry",v));case 21:K.next=24;break;case 23:console.log("parsed date is not a number");case 24:return P=n.indexOf(":"),P+=1,O=n.indexOf(":",P+1),D=n.substring(P,O),K.next=30,i.a.awrap(p.a.setItem(D,n));case 30:t.dispatch(g.CommonActions.reset({index:0,routes:[{name:"QR List"}]})),C.show("BM.KEY"===D?"SafeKey added":"Vaccination Certificate added",{id:2,type:"success",duration:3e3});case 32:case"end":return K.stop()}}),null,null,null,Promise)}()},1,n={scale:{once:!0,value:5,start:.2,step:.2,stop:2},resultOpts:{singleCodeInPage:!0,multiCodesInPage:!1,maxCodesInPage:1},improve:!0,jsQR:{}},k(s.a.createElement(l.a,{style:{marginTop:20}},s.a.createElement(S.ClipLoader,{size:"14px",color:"#1971ef"}))),E.PDF_QR_JS.decodeSinglePage(e.uri,1,n,a)),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),null,null,[[0,7]],Promise)}},s.a.createElement(u.a,{style:[h.a.center,{textAlign:"center",color:"white",fontSize:17}]},s.a.createElement(d.a,{style:{width:20,height:20,marginRight:8},source:n(321)}),"Select")),x||""),s.a.createElement(P,null)):s.a.createElement(v.a,null))}}}]);
//# sourceMappingURL=9.c6d2b503.chunk.js.map