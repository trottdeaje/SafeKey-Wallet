(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{113:function(e,t,n){e.exports=n.p+"static/media/bm-logo.57a3e983.svg"},128:function(e,t,n){e.exports=n.p+"static/media/file-text.a031f6ff.png"},200:function(e,t,n){e.exports=n.p+"static/media/share-min.31430806.svg"},203:function(e,t,n){e.exports=n.p+"static/media/qr-background.83209ff7.svg"},218:function(e,t){},221:function(e,t,n){e.exports=n.p+"static/media/camera.c560f04f.png"},227:function(e,t,n){e.exports=n.p+"static/media/nocam.3d6e5311.png"},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return ge}));var a=n(6),r=n.n(a),o=n(5),c=n.n(o),i=n(2),l=n.n(i),s=n(0),u=n.n(s),m=n(1),f=n(29),d=n(9),p=n(234),g=n(228),y=n(279),h=n(59),b=n(8),E=n(22),w=n(25),S=n(18),x=n(129),v=n(4),O=v.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",paddingHorizontal:20,borderBottomWidth:80,borderBottomColor:"#fff"},containerTop:{flex:1,backgroundColor:"#fff",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",paddingHorizontal:20,paddingTop:20,flexWrap:"wrap",width:"100%",marginBottom:120},btn:{width:"100%",maxWidth:500,borderRadius:10,paddingVertical:11},btnLine:{borderWidth:2.5,borderColor:"#1971ef"},btnText:{textAlign:"center",fontSize:18},bold:{textAlign:"center",color:"#333",fontFamily:"OpenSans_600SemiBold"},shadow:{shadowColor:"#470000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:5,elevation:2},text:{color:"#333",fontFamily:"OpenSans_400Regular",fontSize:14},li:{alignSelf:"flex-start",color:"black",fontFamily:"OpenSans_400Regular",lineHeight:30,marginBottom:30,fontSize:18,textAlign:"left",marginLeft:0,color:"#333333"},noticeHeader:{fontFamily:"OpenSans_600SemiBold",fontSize:19,marginBottom:25,marginTop:25,alignSelf:"flex-start",color:"#333333"},QrHeader:{fontSize:24,fontWeight:"bold",marginBottom:30,marginTop:25,color:"#000"},center:{display:"flex",justifyContent:"center",alignItems:"center"},bmQrLogo:{width:55,height:80,position:"absolute"}}),k=function(){return u.a.createElement(m.a,{style:[O.container,{marginBottom:0,paddingHorizontal:0}]},u.a.createElement(x.a,{color:"#000f0f"}))},C=n(429),j=n(280),B=n(428),R=v.a.create({modalInnerView:{maxWidth:350,backgroundColor:"#fff",borderRadius:5,overflow:"hidden"},IconView:{overflow:"hidden",flexDirection:"row",marginVertical:30},AppIcon:{width:80,height:80,backgroundColor:"#f0f0f0",borderRadius:5,marginHorizontal:4,marginVertical:8}}),P=function(e){var t=Object(s.useState)(!1),a=c()(t,2),r=a[0],o=a[1],i=e.show,l=e.onClose;return Object(s.useEffect)((function(){o(i)}),[i]),u.a.createElement(j.a,{animationIn:"fadeInDownBig",isVisible:r},u.a.createElement(m.a,{style:O.center},u.a.createElement(m.a,{style:[R.modalInnerView,O.center]},u.a.createElement(m.a,{style:{position:"absolute",top:7,right:7}},u.a.createElement(E.a,{onPress:function(){return l()}},u.a.createElement(B.a,{name:"close-outline",size:28,color:"black"}))),u.a.createElement(m.a,{style:[R.IconView,O.center]},u.a.createElement(m.a,{style:R.AppIcon}),u.a.createElement(m.a,{style:R.AppIcon}),u.a.createElement(m.a,{style:[R.AppIcon,O.shadow,{marginRight:4,width:90,height:90,borderRadius:5}]},u.a.createElement(f.a,{source:n(329),style:[{borderRadius:5,width:90,height:90}]})),u.a.createElement(m.a,{style:R.AppIcon}),u.a.createElement(m.a,{style:R.AppIcon})),u.a.createElement(b.a,{style:[O.bold,{fontSize:20,fontFamily:"OpenSans_700Bold",marginBottom:20}]},"Install SafeKey Wallet"),u.a.createElement(b.a,{style:[O.text,{marginHorizontal:20,textAlign:"center",fontSize:16,marginBottom:20}]},"Install SafeKey Wallet on your home screen for quick and easy access when you're on the go."),u.a.createElement(m.a,{style:[O.center,{backgroundColor:"#f9f9f9",width:"100%",paddingVertical:15}]},u.a.createElement(b.a,{style:[O.center,O.text]},"Just tap",u.a.createElement(f.a,{style:{width:18,height:18,marginHorizontal:4,marginBottom:3},source:n(200)}),"then 'Add to Home Screen'")))))},A=v.a.create({container:{position:"absolute",bottom:0,left:0,right:0,height:50,backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row",paddingHorizontal:15},text:{color:"#0000008c"},btnText:{paddingHorizontal:12,paddingVertical:5,fontSize:14,color:"#fff"}}),T=function(){var e=Object(s.useState)(!1),t=c()(e,2),n=t[0],a=t[1],r=Object(s.useState)(null),o=c()(r,2),i=o[0],f=o[1],d=Object(s.useState)(!1),p=c()(d,2),g=p[0],y=p[1];Object(s.useEffect)((function(){!function(){var e=window.navigator.userAgent,t=window.navigator.platform,n=null;-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?(n="Mac OS",y(!1)):-1!==["iPhone","iPad","iPod"].indexOf(t)?(n="iOS",y(!0)):-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?(n="Windows",y(!1)):/Android/.test(e)?n="Android":!n&&/Linux/.test(t)&&(n="Linux",y(!1)),f(n)}()}),[]),window.addEventListener("beforeinstallprompt",(function(e){window.deferredPrompt=e,"Android"===i&&y(!0)}));return window.addEventListener("appinstalled",(function(){y(!1),window.deferredPrompt=null,h.a("AppInstalled",{purpose:"User has installed PWA"}),console.log("PWA was installed")})),u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{style:A.container},u.a.createElement(b.a,{style:A.text},"Version: 1.2.0"),!g||window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches?u.a.createElement(u.a.Fragment,null):u.a.createElement(E.a,{onPress:function(){"iOS"===i?a(!0):"Android"===i?function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=window.deferredPrompt).prompt(),t.next=4,l.a.awrap(e.userChoice);case 4:t.sent,window.deferredPrompt=null;case 6:case"end":return t.stop()}}),null,null,null,Promise)}():console.error("Progressive web app installation is not supported on this device")},style:[O.center,{borderRadius:50,backgroundColor:"#1971ef",shadowColor:"#0a418f"}]},u.a.createElement(b.a,{style:[A.btnText]},"Install"))),u.a.createElement(P,{onClose:function(){return a(!1)},show:n}))},I=function(e){var t=e.navigation,a=Object(s.useState)(null),r=c()(a,2),o=r[0],i=r[1],d=Object(s.useState)(null),p=c()(d,2),g=p[0],y=p[1],h=Object(C.a)([n(203),n(113),n(200)]),x=c()(h,1)[0];return Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("BM.KEY"));case 2:e=t.sent,i(null!==e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[o]),Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("BM.VAX"));case 2:e=t.sent,y(null!==e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[g]),Object(s.useEffect)((function(){!0!==g&&!0!==o||t.dispatch(S.StackActions.replace("QR List"))}),[g,o]),u.a.createElement(u.a.Fragment,null,x?u.a.createElement(m.a,{style:[O.container,{paddingBottom:50}]},u.a.createElement(m.a,null,u.a.createElement(f.a,{resizeMethod:"auto",style:{height:150,width:170,marginTop:25},source:n(203)})),u.a.createElement(b.a,{style:[O.bold,{marginBottom:2,fontSize:18}]},"No SafeKeys found"),u.a.createElement(b.a,{style:[O.text,{marginTop:0,marginBottom:15,textAlign:"center"}]},"Press Scan or Select to add one."),u.a.createElement(E.a,{onPress:function(){t.navigate("Scan QR")},style:[O.btn,O.shadow,{backgroundColor:"#1971ef",borderWidth:0}]},u.a.createElement(b.a,{style:[O.btnText,{color:"white"}]},"Scan Document")),u.a.createElement(E.a,{style:[O.btn,O.shadow,O.btnLine,{backgroundColor:"#fff",marginTop:16}],onPress:function(){t.navigate("Select Document")}},u.a.createElement(b.a,{style:[O.btnText,{color:"#1971ef"}]},"Select Document"))):u.a.createElement(k,null),u.a.createElement(T,null))},K=n(72),V=n(284),z=n(104),D=n(268),F=n(269),Q=function(e){var t=e.navigation,a=Object(s.useState)(""),r=c()(a,2),o=r[0],i=r[1],d=Object(z.b)(),p=Object(C.a)([n(128)]),g=c()(p,1)[0];return u.a.createElement(u.a.Fragment,null,g?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{style:O.container},u.a.createElement(b.a,{style:{textAlign:"center",marginBottom:.5,fontSize:16,marginBottom:16,lineHeight:24}},"Add your SafeKey to your wallet by selecting your"," ",u.a.createElement(b.a,{style:{fontWeight:"bold"}},"SafeKey PDF Document "),"or"," ",u.a.createElement(b.a,{style:{fontWeight:"bold"}},"Vaccination Certificate PDF Document")),u.a.createElement(b.a,{style:[O.text,{fontWeight:"bold",marginTop:15,marginBottom:15}]},"Select your PDF Document"),u.a.createElement(E.a,{style:[O.btn,O.shadow,{backgroundColor:"#1971ef"}],onPress:function(){var e,n,a;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.a.awrap(V.a({type:"application/pdf"}));case 3:"cancel"!==(e=r.sent).type&&(a=function(e){if(0===e.codes.length)return console.error("No QR Found"),void i("SafeKey QR Code not detected. Please try again.");!function(){var n,a,r,o,c,s,f,p,g,y,x,v,k,C,j,B;l.a.async((function(R){for(;;)switch(R.prev=R.next){case 0:if(n=e.codes.toString(),a=[":BM.KEY:"],![":BM.KEY:",":BM.VAX:"].some((function(e){return n.includes(e)}))){R.next=34;break}if(!a.some((function(e){return n.includes(e)}))){R.next=25;break}if(r=n.indexOf(":",130),o=n.indexOf("/"),c=n.substring(r,o),s=c.slice(1),isNaN(s)){R.next=24;break}if(f=parseInt(s.substr(0,4),10),p=parseInt(s.substr(6),10),g=parseInt(s.substr(4,2),10),y=new Date(f,g-1,p),x=new Date,!(y.getTime()<x.getTime())){R.next=18;break}if(!(y.getDate()<x.getDate())){R.next=18;break}return R.abrupt("return",i(u.a.createElement(m.a,{style:[O.center,{width:"100%",maxWidth:500,marginTop:20,padding:10,textAlign:"center"}]},u.a.createElement(b.a,{style:[O.text,{color:"red",fontFamily:"OpenSans_600SemiBold"}]},"This SafeKey has expired. Click the button below to visit the SafeKey renewal page."," "),u.a.createElement(E.a,{style:[O.btn,O.shadow,O.btnLine,{marginTop:10}],onPress:function(){return K.a.openURL("https://www.gov.bm/safekey")}},u.a.createElement(b.a,{style:[O.btnText,{color:"#1971ef"}]},"Renew")))));case 18:return v={weekday:"long",year:"numeric",month:"long",day:"numeric"},k=y.toLocaleString("en-US",v),R.next=22,l.a.awrap(w.a.setItem("passExpiry",k));case 22:R.next=25;break;case 24:console.error("parsed date is not a number");case 25:return C=n.indexOf(":"),C+=1,j=n.indexOf(":",C+1),B=n.substring(C,j),R.next=31,l.a.awrap(w.a.setItem(B,n));case 31:h.a("DocumentAdded",{type:"BM.KEY"===B?"SafeKey":"Vaccination Certificate",purpose:"User has added their SafeKey document"}),t.dispatch(S.CommonActions.reset({index:0,routes:[{name:"QR List"}]})),d.show("BM.KEY"===B?u.a.createElement(m.a,null,u.a.createElement(b.a,{style:[O.bold,{color:"#fff"}]},"SafeKey Added")):u.a.createElement(m.a,null,u.a.createElement(b.a,{style:[O.bold,{color:"#fff"}]},"Vaccination Certificate Added")),{id:3,type:"success",duration:3500});case 34:case"end":return R.stop()}}),null,null,null,Promise)}()},1,n={scale:{once:!0,value:5,start:.2,step:.2,stop:2},resultOpts:{singleCodeInPage:!0,multiCodesInPage:!1,maxCodesInPage:1},improve:!0,jsQR:{}},i(u.a.createElement(m.a,{style:{marginTop:20}},u.a.createElement(F.ClipLoader,{size:"14px",color:"#1971ef"}))),D.PDF_QR_JS.decodeSinglePage(e.uri,1,n,a)),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0);case 10:case"end":return r.stop()}}),null,null,[[0,7]],Promise)}},u.a.createElement(b.a,{style:[O.center,{textAlign:"center",color:"white",fontSize:17}]},u.a.createElement(f.a,{style:{width:20,height:20,marginRight:8},source:n(128)}),"Select")),u.a.createElement(b.a,null,o||"")),u.a.createElement(T,null)):u.a.createElement(k,null))},W=n(21),L=n(270),N=n.n(L),_=W.a.get("window"),M=W.a.get("screen"),H=function(e){var t=e.navigation,n=Object(s.useState)(!1),a=c()(n,2),r=a[0],o=a[1],i=Object(s.useState)("environment"),f=c()(i,2),d=f[0],p=f[1],g=Object(s.useState)(!1),y=c()(g,2),x=y[0],v=y[1],k=Object(s.useState)({window:_,screen:M}),C=c()(k,2),j=C[0],B=C[1],R=Object(z.b)(),P=function(e){var t=e.window,n=e.screen;B({window:t,screen:n})};Object(s.useEffect)((function(){return W.a.addEventListener("change",P),function(){W.a.removeEventListener("change",P)}}));return u.a.createElement(m.a,{style:[O.container,{backgroundColor:"#000",marginBottom:0}]},u.a.createElement(m.a,{style:[O.center,{backgroundColor:"#000",fontSize:16,lineHeight:50,textAlign:"center",position:"relative",textAlignVertical:"center",margin:0,zIndex:10,fontSize:16,flex:1,minHeight:80}]},u.a.createElement(b.a,{style:{color:"#f1f1f1",marginBottom:5,marginTop:15}},"Scan your SafeKey Document QR code"),u.a.createElement(b.a,{style:{color:"#f1f1f1"}},"Keep camera steady"),u.a.createElement(b.a,{style:{color:x?"#ffbb33":"#28a745",marginTop:10,fontFamily:"OpenSans_600SemiBold"}},x?"INVALID QR":"SCANNING")),u.a.createElement(N.a,{facingMode:d,onLoad:function(){console.log("QR Reader Loaded")},delay:300,onError:function(e){console.log(e.name),"NotAllowedError"===e.name&&t.dispatch(S.CommonActions.reset({index:0,routes:[{name:"NoCamera"}]}))},onScan:function(e){r||function(e){var n,a,r,c,i,s,f,d,p,g,y,x,k,C,j,B;l.a.async((function(P){for(;;)switch(P.prev=P.next){case 0:if(n=[":BM.KEY:",":BM.VAX:"],a=[":BM.KEY:"],null===e){P.next=40;break}if(!n.some((function(t){return e.includes(t)}))){P.next=37;break}if(!a.some((function(t){return e.includes(t)}))){P.next=25;break}if(r=e.indexOf(":",130),c=e.indexOf("/"),i=e.substring(r,c),s=i.slice(1),isNaN(s)){P.next=24;break}if(f=parseInt(s.substr(0,4),10),d=parseInt(s.substr(6),10),p=parseInt(s.substr(4,2),10),g=new Date(f,p-1,d),y=new Date,!(g.getTime()<y.getTime())){P.next=18;break}return R.show(u.a.createElement(m.a,null,u.a.createElement(E.a,{onPress:function(){K.a.openURL("https://www.gov.bm/safekey"),R.hide(1)}},u.a.createElement(b.a,{style:[O.bold,{color:"#fff"}]},"This SafeKey has expired"),u.a.createElement(b.a,{style:[O.text,{color:"#fff",textAlign:"center"}]},"Click here to renew it"))),{offsetBottom:50,id:1,position:"bottom",duration:0,type:"normal",normalColor:"#ff4d4d"}),P.abrupt("return",t.goBack());case 18:return x={weekday:"long",year:"numeric",month:"long",day:"numeric"},k=g.toLocaleString("en-US",x),P.next=22,l.a.awrap(w.a.setItem("passExpiry",k));case 22:P.next=25;break;case 24:console.log("parsed date is not a number");case 25:return C=e.indexOf(":"),C+=1,j=e.indexOf(":",C+1),B=e.substring(C,j),P.next=31,l.a.awrap(w.a.setItem(B,e));case 31:o(!0),h.a("DocumentScanned",{type:"BM.KEY"===B?"SafeKey":"Vaccination Certificate",purpose:"User has scanned their SafeKey QR code."}),t.dispatch(S.CommonActions.reset({index:0,routes:[{name:"QR List"}]})),R.show("BM.KEY"===B?u.a.createElement(m.a,null,u.a.createElement(b.a,{style:[O.bold,{color:"#fff"}]},"SafeKey Added")):u.a.createElement(m.a,null,u.a.createElement(b.a,{style:[O.bold,{color:"#fff"}]},"Vaccination Certificate Added")),{id:3,type:"success",duration:3500}),P.next=38;break;case 37:v(!0);case 38:P.next=42;break;case 40:o(!1),v(!1);case 42:case"end":return P.stop()}}),null,null,null,Promise)}(e)},style:{width:j.window.width<565?"100%":510,alignSelf:"center"}}),u.a.createElement(m.a,{style:{width:"100%",flex:1,justifyContent:"center"}},u.a.createElement(E.a,{onPress:function(){p("environment"===d?"user":"environment")},style:{paddingHorizontal:10,alignSelf:"center",backgroundColor:"#1971ef",paddingVertical:10,borderRadius:5,marginBottom:25,marginTop:25}},u.a.createElement(b.a,{style:{color:"white",textAlign:"center",letterSpacing:1,fontFamily:"OpenSans_400Regular"}},"Switch Camera"))))},Y=n(283),U=function(e){var t=Object(s.useState)("#000"),n=c()(t,2),a=n[0],r=n[1],o=Object(s.useState)("#000"),i=c()(o,2),f=i[0],d=i[1],p=Object(s.useState)(!1),g=c()(p,2),y=g[0],x=g[1],v=Object(s.useState)(!1),k=c()(v,2),C=k[0],j=k[1];Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("no_notice_safekey"));case 2:null!==(e=t.sent)&&x(e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[]),Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("no_notice_vaccine"));case 2:null!==(e=t.sent)&&j(e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[]);var R=u.a.createRef(),P=function e(){R.current&&(R.current.style.display="none",document.removeEventListener("click",e))};Object(s.useEffect)((function(){"Vaccination Certificate"==e.name?(r("#fc9cc7"),d("#fc9cc7")):"SafeKey"==e.name&&(r("#5299e1"),d("#66b0ff"))}),[e.name]);var A=Object(S.useNavigation)();return u.a.createElement(m.a,{style:{width:"100%"}},u.a.createElement(Y.a,{start:{x:1,y:0},end:{x:0,y:0},colors:[a,f],style:[O.shadow,{width:"100%",marginBottom:15,paddingLeft:15,borderRadius:10}]},u.a.createElement(E.a,{style:{justifyContent:"space-between",flexDirection:"row",alignItems:"center"},onPress:function(){"SafeKey Notice"===e.infoScreen&&(y?A.navigate("SafeKey QR"):y||A.navigate("SafeKey Notice")),"Vaccination Notice"===e.infoScreen&&(C?A.navigate("Vaccination Certificate QR"):C||A.navigate("Vaccination Notice"))}},u.a.createElement(m.a,{style:{paddingVertical:15}},u.a.createElement(b.a,{style:{fontFamily:"OpenSans_600SemiBold",color:"white",textAlign:"left",fontSize:16}},e.name)),u.a.createElement(E.a,{onPress:function(){R.current.style.display="flex",document.addEventListener("click",P)},style:[O.center,{height:"100%",width:50,flexDirection:"row"}]},u.a.createElement(B.a,{name:"ios-ellipsis-vertical",size:24,color:"white"})),u.a.createElement(m.a,{style:[O.shadow,{display:"none",flexDirection:"column",backgroundColor:"#fff",borderRadius:5,position:"absolute",right:40,top:11}],ref:R},u.a.createElement(E.a,{onPress:function(){var t;t=e.type,l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"BM.KEY"!==t){e.next=8;break}return e.next=4,l.a.awrap(w.a.removeItem("passExpiry"));case 4:return e.next=6,l.a.awrap(w.a.removeItem("no_notice_safekey"));case 6:e.next=11;break;case 8:if("BM.VAX"!==t){e.next=11;break}return e.next=11,l.a.awrap(w.a.removeItem("no_notice_vaccine"));case 11:return e.next=13,l.a.awrap(w.a.removeItem(t));case 13:h.a("QrDeleted",{type:"BM.KEY"===t?"SafeKey":"Vaccination Certificate",purpose:"user deleted a safekey"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),alert(e.t0);case 19:case"end":return e.stop()}}),null,null,[[0,16]],Promise),e.removeItem()},style:{paddingHorizontal:20,paddingVertical:5}},u.a.createElement(b.a,{style:{fontFamily:"OpenSans_400Regular",color:"#dc3545"}},"Delete"))))))},X=n(63),G=n(125),J=n(430),q=v.a.create({btnCircle:{width:55,height:55,borderRadius:50,position:"absolute",bottom:20,right:20,backgroundColor:"#1971ef"},infoPoints:{fontSize:10,fontFamily:"OpenSans_400Regular",color:"#919191",marginBottom:-10}}),Z=function(e){var t=e.navigation,a=Object(s.useState)(void 0),r=c()(a,2),o=r[0],i=r[1],d=Object(s.useState)(void 0),p=c()(d,2),g=p[0],y=p[1],h=Object(s.useState)(),E=c()(h,2),x=E[0],v=E[1],j=Object(s.useState)(),R=c()(j,2),P=R[0],A=R[1],I=Object(s.useState)(!1),K=c()(I,2),V=K[0],z=K[1],D=Object(C.a)([n(128),n(221)]),F=c()(D,1)[0],Q=Object(X.e)({OpenSans_400Regular:X.a,OpenSans_600SemiBold:X.b}),W=c()(Q,1)[0];return Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("BM.KEY"));case 2:null!==(e=t.sent)?(y(e),v(!0)):v(!1);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[x]),Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("BM.VAX"));case 2:null!==(e=t.sent)?(i(e),A(!0)):A(!1);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[P]),Object(s.useEffect)((function(){!1===P&&!1===x&&t.dispatch(S.StackActions.replace("Home"))}),[P,x]),u.a.createElement(m.a,{style:{backgroundColor:"#fff",flex:1}},F||W?u.a.createElement(m.a,{style:O.containerTop},u.a.createElement(m.a,{style:[O.center,{alignSelf:"center",backgroundColor:"#f9f9f9",padding:20,paddingBottom:35,marginBottom:25,marginTop:5,width:"100%",maxWidth:650,borderRadius:10,borderWidth:1,borderColor:"#dadada"}]},u.a.createElement(b.a,null,u.a.createElement(b.a,{style:{fontSize:18,alignSelf:"flex-start",fontFamily:"OpenSans_600SemiBold",color:"#919191",display:"block"}},"Guide"),"\n",u.a.createElement(b.a,{style:{fontSize:14,color:"#919191"}},"\u2022"),u.a.createElement(b.a,{style:q.infoPoints}," ","SafeKey Wallet currently supports two QR Codes. Vaccination Certificate & SafeKey."),"\n",u.a.createElement(b.a,{style:{display:"block"}}," "),u.a.createElement(b.a,{style:{fontSize:14,color:"#919191"}},"\u2022"),u.a.createElement(b.a,{style:q.infoPoints}," ","Select the QR you want to present. Read the information on the next screen carefully, then continue."),"\n",u.a.createElement(b.a,{style:{display:"block"}}," "),u.a.createElement(b.a,{style:{fontSize:14,color:"#919191"}},"\u2022"),u.a.createElement(b.a,{style:q.infoPoints}," ","When your SafeKey expires, you can add another by first deleting the expired one, then clicking the plus button and selecting either the camera button or the document button."))),P?u.a.createElement(U,{name:"Vaccination Certificate",type:"BM.VAX",holder:"John Doe",removeItem:function(){A(!1)},infoScreen:"Vaccination Notice",data:o}):u.a.createElement(b.a,null),x?u.a.createElement(U,{name:"SafeKey",type:"BM.KEY",holder:"John Doe",removeItem:function(){v(!1)},infoScreen:"SafeKey Notice",data:g}):u.a.createElement(b.a,null),!P^!x?u.a.createElement(m.a,{style:{position:"absolute",bottom:-60,right:20}},u.a.createElement(G.b,{slideSpeed:500,direction:"left",spacing:8,isOpen:V,style:(q.btnCircle,O.shadow)},u.a.createElement(G.c,{iconResting:u.a.createElement(J.a,{name:"plus",size:24,color:"white"}),iconActive:u.a.createElement(B.a,{name:"close-outline",size:24,color:"white"}),background:"#1971ef",onClick:function(){return z(!V)},size:56}),u.a.createElement(G.a,{icon:u.a.createElement(f.a,{id:"camera",style:{height:20,width:20},source:n(221)}),background:"#1971ef",size:40,onClick:function(){z(!V),t.navigate("Scan QR")}}),u.a.createElement(G.a,{icon:u.a.createElement(f.a,{style:{width:20,height:20},source:n(128)}),background:"#1971ef",size:40,onClick:function(){z(!V),t.navigate("Select Document")}}))):u.a.createElement(b.a,null)):u.a.createElement(k,null),u.a.createElement(T,null))},$=n(111),ee=function(e){var t=e.navigation,n=Object(s.useState)(null),a=c()(n,2),r=a[0],o=a[1],i=Object(s.useState)(!1),f=c()(i,2),d=f[0],p=f[1],g=Object(s.useState)(!1),y=c()(g,2),h=y[0],x=y[1];$.a.isAvailableAsync().then((function(e){e&&x(!0)}));return Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("BM.KEY"));case 2:e=t.sent,o(null!==e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[r]),Object(s.useEffect)((function(){!1===r&&t.dispatch(S.StackActions.replace("QR List"))}),[r]),u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{style:O.container},u.a.createElement(m.a,null,u.a.createElement(b.a,{style:O.noticeHeader},"By allowing your SafeKey to be scanned you're agreeing to share the following information:"),u.a.createElement(b.a,{style:O.li},"1. Initials","\n","2. Date of Birth","\n","3. Expiry")),u.a.createElement(E.a,{onPress:function(){d&&l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(w.a.setItem("no_notice_safekey",!0));case 2:case"end":return e.stop()}}),null,null,null,Promise),t.navigate("SafeKey QR")},style:[O.btn,O.shadow,{backgroundColor:"#1971ef",maxWidth:350,marginBottom:25}]},u.a.createElement(b.a,{style:[O.btnText,{color:"#fff"}]},"Continue")),u.a.createElement(u.a.Fragment,null,h?u.a.createElement(m.a,{style:[O.center,{flexDirection:"row"}]},u.a.createElement(b.a,{style:[O.text,{marginEnd:8}]},"Don't show again"),u.a.createElement($.a,{value:d,onValueChange:p})):null)),u.a.createElement(T,null))},te=function(e){var t=e.navigation,n=Object(s.useState)(null),a=c()(n,2),r=a[0],o=a[1],i=Object(s.useState)(!1),f=c()(i,2),d=f[0],p=f[1],g=Object(s.useState)(!1),y=c()(g,2),h=y[0],x=y[1];$.a.isAvailableAsync().then((function(e){e&&x(!0)})),console.log(d);return Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("BM.VAX"));case 2:e=t.sent,o(null!==e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[r]),Object(s.useEffect)((function(){!1===r&&t.dispatch(S.StackActions.replace("QR List"))}),[r]),u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{style:O.container},u.a.createElement(m.a,null,u.a.createElement(b.a,{style:O.noticeHeader},"By allowing your Vaccination Certificate to be scanned you're agreeing to share the following information:"),u.a.createElement(b.a,{style:O.li},"1. Full Name","\n","2. Date of Birth","\n","3. Expiry","\n","4. Vaccine Type","\n","5. Vaccine Dosage","\n","6. Date of Vaccination")),u.a.createElement(E.a,{onPress:function(){d&&l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(w.a.setItem("no_notice_vaccine",!0));case 2:case"end":return e.stop()}}),null,null,null,Promise),t.navigate("Vaccination Certificate QR")},style:[O.btn,O.shadow,{backgroundColor:"#1971ef",maxWidth:350,marginBottom:25}]},u.a.createElement(b.a,{style:[O.btnText,{color:"#fff"}]},"Continue")),u.a.createElement(u.a.Fragment,null,h?u.a.createElement(m.a,{style:[O.center,{flexDirection:"row"}]},u.a.createElement(b.a,{style:[O.text,{marginEnd:8}]},"Don't show again"),u.a.createElement($.a,{value:d,onValueChange:p})):null)),u.a.createElement(T,null))},ne=n(170),ae=function(e){var t=e.navigation,a=Object(s.useState)(null),r=c()(a,2),o=r[0],i=r[1],d=Object(s.useState)(null),p=c()(d,2),g=p[0],y=p[1],h=Object(s.useState)(null),x=c()(h,2),v=x[0],C=x[1];return Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("BM.KEY"));case 2:null!==(e=t.sent)?(i(!0),y(e)):i(!1);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[o]),Object(s.useEffect)((function(){!1===o&&t.dispatch(S.StackActions.replace("QR List"))}),[o]),Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("passExpiry"));case 2:null!==(e=t.sent)&&C(e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[]),u.a.createElement(u.a.Fragment,null,g?u.a.createElement(m.a,{style:O.container},u.a.createElement(b.a,{style:O.QrHeader},"SafeKey"),u.a.createElement(m.a,{style:O.center},u.a.createElement(m.a,{style:[O.center,{borderWidth:5,borderColor:"#63acfa"}]},u.a.createElement(f.a,{style:O.bmQrLogo,source:n(113)}),u.a.createElement(ne.a,{value:g,size:300,quietZone:10,color:"#121212"})),v?u.a.createElement(b.a,{style:[O.bold,{marginTop:20,fontSize:18}]},"Expiry:"," ",u.a.createElement(b.a,{style:[O.text,{fontSize:18}]},v)):u.a.createElement(b.a,null)),u.a.createElement(E.a,{onPress:function(){return t.dispatch(S.CommonActions.reset({index:0,routes:[{name:"QR List"}]}))},style:[O.btn,O.shadow,{backgroundColor:"#1971ef",marginTop:20,marginBottom:25,maxWidth:250}]},u.a.createElement(b.a,{style:[O.btnText,{color:"#fff"}]},"Go Back"))):u.a.createElement(k,null),u.a.createElement(T,null))},re=function(e){var t=e.navigation,a=Object(s.useState)(null),r=c()(a,2),o=r[0],i=r[1],d=Object(s.useState)(null),p=c()(d,2),g=p[0],y=p[1];return Object(s.useEffect)((function(){try{!function(){var e;l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(w.a.getItem("BM.VAX"));case 2:null!==(e=t.sent)?(i(!0),y(e)):i(!1);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}catch(e){alert(e)}}),[o]),Object(s.useEffect)((function(){!1===o&&t.dispatch(S.StackActions.replace("QR List"))}),[o]),u.a.createElement(u.a.Fragment,null,g?u.a.createElement(m.a,{style:O.container},u.a.createElement(b.a,{style:O.QrHeader},"Vaccination Certificate"),u.a.createElement(m.a,{style:O.center},u.a.createElement(m.a,{style:[O.center,{borderWidth:5,borderColor:"#fc9cc7"}]},u.a.createElement(f.a,{style:O.bmQrLogo,source:n(113)}),u.a.createElement(ne.a,{value:g,size:300,quietZone:10,color:"#121212"}))),u.a.createElement(E.a,{onPress:function(){return t.dispatch(S.CommonActions.reset({index:0,routes:[{name:"QR List"}]}))},style:[O.btn,O.shadow,{backgroundColor:"#1971ef",marginTop:30,marginBottom:25,maxWidth:250}]},u.a.createElement(b.a,{style:[O.btnText,{color:"#fff"}]},"Go Back"))):u.a.createElement(k,null),u.a.createElement(T,null))},oe=function(e){var t=e.navigation;return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{style:O.container},u.a.createElement(b.a,{style:{fontSize:30,fontFamily:"OpenSans_600SemiBold",marginBottom:10}},"Oops"),u.a.createElement(b.a,{style:[O.text,{textAlign:"center"}]},"The page you were looking for was not found."),u.a.createElement(E.a,{onPress:function(){t.dispatch(S.CommonActions.reset({index:0,routes:[{name:"Home"}]}))},style:[O.shadow,O.btn,{backgroundColor:"#1971ef",marginTop:10}]},u.a.createElement(b.a,{style:[O.btnText,{color:"#fff"}]},"Go Back"))),u.a.createElement(T,null))},ce=n(89),ie=n.n(ce),le=v.a.create({image:{width:40,height:40,marginBottom:10},button:{backgroundColor:"#1971ef",paddingHorizontal:15,paddingVertical:5,borderRadius:5}}),se=function(e){var t=e.navigation,a=Object(s.useState)(null),r=c()(a,2),o=r[0],i=r[1],l=Object(C.a)([n(227)]),d=c()(l,1)[0];return Object(s.useEffect)((function(){ie.a.load((function(){ie.a.browser.isChrome?i("https://support.google.com/chrome/answer/2693767"):ie.a.browser.isEdge?i("https://help.doxy.me/en/articles/3867526-allow-access-to-camera-in-edge#:~:text=How%20to%20enable%20your,browser%20tab%20(CTRL%20%2B%20R)."):ie.a.browser.isFirefox?i("https://support.mozilla.org/en-US/kb/camera-permissions"):ie.a.browser.isOpera?i("https://help.opera.com/en/latest/web-preferences/#camera"):ie.a.browser.isSafari&&i("https://help.cer.bo/support/solutions/articles/8000084621-allow-access-to-camera-in-safari-mobile-tablet-")}))}),[]),u.a.createElement(u.a.Fragment,null,d?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{style:O.container},u.a.createElement(f.a,{source:n(227),style:le.image}),u.a.createElement(b.a,{style:[O.bold,{marginBottom:15,fontSize:18}]},"No access to camera"),u.a.createElement(b.a,{style:[O.text,{textAlign:"center",marginBottom:10}]},"Please enable camera access in your web browser\u2019s settings then try scanning again."),u.a.createElement(m.a,{style:[O.center,{flexDirection:"row"}]},u.a.createElement(E.a,{onPress:function(){K.a.openURL(o)},style:[O.center,{borderWidth:1,borderColor:"grey",borderRadius:5,paddingHorizontal:10,paddingVertical:5,marginRight:10}]},u.a.createElement(b.a,{style:{color:"blue"}},"Learn more")),u.a.createElement(E.a,{onPress:function(){t.dispatch(S.CommonActions.reset({index:0,routes:[{name:"QR List"}]}))},style:[le.button,O.shadow]},u.a.createElement(b.a,{style:{color:"white",textAlign:"center"}},"Go back")))),u.a.createElement(T,null)):u.a.createElement(k,null))},ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=Object(g.a)();function ge(){var e=Object(s.useState)(!1),t=c()(e,2),a=t[0],r=t[1],o=Object(s.useState)(!1),i=c()(o,2),g=i[0],b=i[1],E=Object(X.e)({OpenSans_400Regular:X.a,OpenSans_600SemiBold:X.b,OpenSans_700Bold:X.c,OpenSans_800ExtraBold:X.d}),S=c()(E,1)[0],x={prefixes:[],config:{screens:{Home:"","Select Document":"select-document","Scan QR":"qr-scanner","QR List":"wallet","SafeKey Notice":"safekey-notice","Vaccination Notice":"certificate-notice","SafeKey QR":"safekey","Vaccination Certificate QR":"vaccination-certificate",NoCamera:"NoCamera",NotFound:"*"}}};Object(s.useEffect)((function(){!function(){var e,t;l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.a.awrap(w.a.getItem("BM.KEY"));case 3:return e=n.sent,n.next=6,l.a.awrap(w.a.getItem("BM.VAX"));case 6:t=n.sent,null===e&&null===t||b(!0),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),alert("Failed to fetch the data from storage: "+n.t0);case 13:r(!0);case 14:case"end":return n.stop()}}),null,null,[[0,10]],Promise)}()}),[]);var v=Object(s.useRef)(),O=Object(s.useRef)();return u.a.createElement(z.a,{offsetBottom:55},S&&a?u.a.createElement(p.a,{ref:v,onReady:function(){return O.current=v.current.getCurrentRoute().name},onStateChange:function(){var e,t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=O.current,t=v.current.getCurrentRoute().name,e===t){n.next=5;break}return n.next=5,l.a.awrap(h.b(t));case 5:O.current=t;case 6:case"end":return n.stop()}}),null,null,null,Promise)},linking:x,fallback:u.a.createElement(k,null)},u.a.createElement(pe.Navigator,{screenOptions:{headerTitleStyle:{alignSelf:"center",fontFamily:"OpenSans_600SemiBold"},headerRight:function(){return u.a.createElement(f.a,{resizeMethod:"auto",style:{width:23,height:35,margin:20},source:n(113)})}},initialRouteName:g?"QR List":"Home"},u.a.createElement(pe.Screen,{name:"Home",component:I,options:de(de({},y.a.ModalSlideFromBottomIOS),{},{headerTitleStyle:{alignSelf:"flex-start",fontFamily:"OpenSans_600SemiBold"},title:"SafeKey Wallet",headerTitle:" SafeKey Wallet",cardStyleInterpolator:"ios"===d.a.OS?function(e){return{cardStyle:{opacity:e.current.progress}}}:void 0,headerRight:function(){return u.a.createElement(m.a,{style:{flexDirection:"row-reverse",paddingRight:20,alignItems:"center"}},u.a.createElement(f.a,{resizeMethod:"auto",style:{width:23,height:35},source:n(113)}))}})}),u.a.createElement(pe.Screen,{name:"Select Document",component:Q,options:{title:"Select Document",animationTypeForReplace:"pop",headerTitleStyle:{alignSelf:"flex-start",fontFamily:"OpenSans_600SemiBold"},headerTitle:" Select your SafeKey Document"}}),u.a.createElement(pe.Screen,{name:"QR List",component:Z,options:{title:"SafeKey Wallet",animationTypeForReplace:"pop",headerTitleStyle:{alignSelf:"flex-start",fontFamily:"OpenSans_600SemiBold"},headerTitle:" SafeKey Wallet"}}),u.a.createElement(pe.Screen,{name:"Scan QR",options:{headerTitleAlign:"center",headerTitle:"Scan your SafeKey"},component:H}),u.a.createElement(pe.Screen,{name:"SafeKey Notice",component:ee,options:{headerTitleAlign:"center",headerTitleStyle:{alignSelf:"center",fontFamily:"OpenSans_600SemiBold"},headerTitle:"Notice"}}),u.a.createElement(pe.Screen,{name:"Vaccination Notice",component:te,options:{headerTitleAlign:"center",headerTitle:"Notice",headerTitleStyle:{alignSelf:"center",fontFamily:"OpenSans_600SemiBold"}}}),u.a.createElement(pe.Screen,{options:{headerTitle:"Show QR",headerTitleAlign:"center"},name:"SafeKey QR",component:ae}),u.a.createElement(pe.Screen,{options:{headerTitle:"Show QR",headerTitleAlign:"center"},name:"Vaccination Certificate QR",component:re}),u.a.createElement(pe.Screen,{options:{headerTitle:"404: Not Found",title:"Page Not Found"},name:"NotFound",component:oe}),u.a.createElement(pe.Screen,{options:{headerTitleAlign:"center",headerTitle:"No Camera Permission",title:"No Camera Permission"},name:"NoCamera",component:se}))):u.a.createElement(k,null))}!function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="/service-worker.js";ue?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):me(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):me(t,e)}))}}()},302:function(e,t,n){n(303),e.exports=n(423)},329:function(e,t,n){e.exports=n.p+"static/media/icon.1092b622.png"},345:function(e,t){},346:function(e,t){},347:function(e,t){},348:function(e,t){},349:function(e,t){}},[[302,1,2]]]);
//# sourceMappingURL=app.660dbc2d.chunk.js.map